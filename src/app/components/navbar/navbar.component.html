<nav
  class="bg-gray-700 bg-opacity-90 backdrop-blur-lg text-white px-6 py-6 flex items-center justify-between fixed w-full top-0 left-0 shadow-lg z-50 h-24"
  (click)="closeProfileMenuOnOutsideClick($event)"
>
  <div class="flex items-center gap-3">
    <div class="h-12 w-12 relative">
      <img
        src="../assets/music.png"
        alt="Logo"
        class="absolute inset-0 h-full w-full object-contain"
      />
    </div>
    <span class="text-2xl font-semibold title title-text">SoundCheck</span>
  </div>

  <div
    class="hidden md:flex absolute left-1/2 transform -translate-x-1/2 gap-10"
  >
    <a
      routerLink="/"
      routerLinkActive="active-link"
      [routerLinkActiveOptions]="{ exact: true }"
      class="link rounded-md px-4 py-3 text-lg font-medium text-gray-300 hover:bg-gray-700 hover:text-white"
      (click)="closeProfileMenu()"
    >
      Search
    </a>

    <a
      routerLink="/friends"
      routerLinkActive="active-link"
      class="link rounded-md px-4 py-3 text-lg font-medium text-gray-300 hover:bg-gray-700 hover:text-white"
      (click)="closeProfileMenu()"
    >
      Friends
    </a>
    <a
      routerLink="/profile"
      routerLinkActive="active-link"
      class="link rounded-md px-4 py-3 text-lg font-medium text-gray-300 hover:bg-gray-700 hover:text-white"
      (click)="closeProfileMenu()"
    >
      Profile
    </a>
  </div>

  <div class="hidden md:flex items-center gap-4 relative">
    <div class="relative">
      <button
        (click)="toggleProfileMenu($event)"
        class="flex items-center rounded-full focus:outline-none"
      >
        <div class="h-16 w-16 relative">
           <!-- Skeleton Loader (When Loading) -->
           <div
           *ngIf="isProfileLoading"
           class="absolute inset-0 flex items-center justify-center h-full w-full rounded-full border-2 border-gray-700 bg-gray-800"
         >
           <div class="w-6 h-6 border-t-2 border-white rounded-full animate-spin"></div>
         </div>
         
          <!-- Profile Image (When Loaded) -->
          <img
          *ngIf="!isProfileLoading"
          [src]="userProfile.profilePicture || 'assets/user.png'"
            alt="User Profile"
            class="absolute inset-0 h-full w-full rounded-full border-2 border-gray-700 shadow-md object-cover"
          />
        </div>
      </button>

      <div
      *ngIf="isProfileMenuOpen"
      @fadeScale
      class="absolute font-semibold right-0 mt-2 w-56 bg-gray-900 text-gray-300 rounded-lg shadow-lg z-50 border border-gray-700"
      >
      <a
        routerLink="/profile"
        class="flex items-center px-5 py-5 text-lg hover:bg-gray-700/60 hover:text-white rounded-lg transition-all duration-200"
        (click)="closeProfileMenu()"
      >
        <i class="fas fa-user w-6 text-center"></i>
        <span class="ml-3">Profile</span>
      </a>
    
      <a
        routerLink="/friends"
        class="flex items-center px-5 py-5 text-lg hover:bg-gray-700/60 hover:text-white rounded-lg transition-all duration-200"
        (click)="closeProfileMenu()"
      >
        <i class="fas fa-users w-6 text-center"></i>
        <span class="ml-3">Friends</span>
      </a>
    
      <button
        (click)="logout()"
        class="flex items-center w-full text-left px-5 py-5 text-lg text-red-400 hover:bg-gray-700/60 hover:text-red-300 rounded-lg transition-all duration-200"
      >
        <i class="fas fa-sign-out-alt w-6 text-center"></i>
        <span class="ml-3">Logout</span>
      </button>
    </div>    
    
    </div>
  </div>

  <button (click)="toggleMenu()" class="md:hidden">
    <svg
      class="h-8 w-8 text-white"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path d="M4 6h16M4 12h16m-7 6h7"></path>
    </svg>
  </button>
</nav>
<div
  *ngIf="isMenuOpen"
  @fadeSlide
  class="fixed inset-0 bg-gray-900/90 backdrop-blur-lg flex flex-col items-center justify-center space-y-16 text-white md:hidden z-50"
>
  <!-- Close Button -->
  <button
    (click)="toggleMenu()"
    class="absolute top-6 right-6 text-4xl text-gray-300 hover:text-white transition"
  >
    &times;
  </button>

  <!-- Navigation Links -->
  <a
    routerLink="/"
    (click)="toggleMenu()"
    class="flex items-center gap-3 text-3xl font-semibold text-gray-300 hover:text-white transition"
  >
    <i class="fas fa-search"></i> Search
  </a>

  <a
    routerLink="/friends"
    (click)="toggleMenu()"
    class="flex items-center gap-3 text-3xl font-semibold text-gray-300 hover:text-white transition"
  >
    <i class="fas fa-users"></i> Friends
  </a>

  <a
    routerLink="/profile"
    (click)="toggleMenu()"
    class="flex items-center gap-3 text-3xl font-semibold text-gray-300 hover:text-white transition"
  >
    <i class="fas fa-user"></i> Profile
  </a>

  <!-- Logout Button -->
  <button
    (click)="logout()"
    class="flex items-center gap-3 bg-red-500 px-8 py-4 rounded-lg text-2xl font-semibold text-white hover:brightness-110 transition shadow-md"
  >
    <i class="fas fa-sign-out-alt"></i> Logout
  </button>
</div>
